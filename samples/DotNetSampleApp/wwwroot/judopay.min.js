var merchantURL,apiToken,environment=environment||{};!function(e){var t="#{environment}";function r(){return 0==t.indexOf("#")?"local":t}e.getIframeUrl=function(){switch(r()){case"local":return"http://localhost:5001/html/judo-hosted-frame.html";case"uat":return"https://js.uat.judopay.com/html/judo-hosted-frame.html";case"prod":return"https://js.judopay.com/html/judo-hosted-frame.html"}},e.getPartnerUrl=function(){switch(r()){case"local":return"http://localhost/partnerapi/encryptions/paymentdetails";case isSandbox:return"https://gw1.uat.judopay-sandbox.com/encryptions/paymentdetails";case!isSandbox:return"https://gw1.uat.judopay.com/encryptions/paymentdetails";case isSandbox:return"https://gw1.judopay-sandbox.com/encryptions/paymentdetails";case!isSandbox:return"https://gw1.judopay.com/encryptions/paymentdetails"}}}(environment);var isSandbox=!1;function JudoPay(e,t){console.log("Creating Judopay Instance "+e),this.uuid=iframeInitialiser.guid(),this.createCardDetails=function(t,r){void 0===r&&(r=judoDefaultConfig.defaultStyle.iframe),iframeInitialiser.buildIFrame(t,this.uuid,e),iframeInitialiser.addStyle(this.uuid,r);var n="judo-"+this.uuid;return document.getElementById(n).addEventListener("load",function(){iframeInitialiser.applyStyles();var t={merchantUrl:document.location.protocol+"//"+document.location.hostname+":"+document.location.port,apiToken:e};iframeInitialiser.setupData(n,t)}),this},this.createToken=function(e){var t="judo-"+e.uuid;document.getElementById(t);return new Promise(function(e,r){window.addEventListener("message",function(t){if("errorMessage"===t.data.action&&t.data.params){var n={error:{message:t.data.params}};r(n)}else"return"!==t.data.action||e(t.data.params)},{once:!0}),iframeInitialiser.iframeAction(t,"paymentMethods.paymentDetails")})}}var errorMessageBuilder=errorMessageBuilder||{};!function(e){e.errorMessage=function(t,r){if(t<0||t>=Object.keys(judoStrings.errorList).length){var n="Error ID "+t+" does not exist!";return console.log(n),n}return null!=r&&r.constructor===Array?e.substituteVariablesInMessage(judoStrings.errorList[t],r):judoStrings.errorList[t]},e.substituteVariablesInMessage=function(e,t){for(var r=0;r<t.length;r++)e=e.replace("{"+r+"}",t[r]);return e}}(errorMessageBuilder);var errorReporting=errorReporting||{};!function(e){var t=-1;e.throwValidationError=function(e,r){t=e;var n=errorMessageBuilder.errorMessage(e,r);errorStack.push(e,n),errorToParent(n)},e.getCurrentDisplayedError=function(){return t},e.removeError=function(e){if(errorStack.removeElement(e),t===e){var r=errorStack.latestError();-1===r?(t=-1,errorToParent("")):(t=r.id,errorToParent(r.message))}},e.errorIdsAssociatedWithCardNumber=[0,1,2,3],e.errorIdsAssociatedWithExpiry=[4,5,6],e.errorIdsAssociatedWithCvc=[7,8,9,10],e.removeCreditCardNumberErrors=function(){for(var t=0;t<errorReporting.errorIdsAssociatedWithCardNumber.length;t++)e.removeError(errorReporting.errorIdsAssociatedWithCardNumber[t])},e.removeExpiryDateErrors=function(){for(var t=0;t<errorReporting.errorIdsAssociatedWithExpiry.length;t++)e.removeError(errorReporting.errorIdsAssociatedWithExpiry[t])},e.removeCvcErrors=function(){for(var t=0;t<errorReporting.errorIdsAssociatedWithCvc.length;t++)e.removeError(errorReporting.errorIdsAssociatedWithCvc[t])},e.simplifiedPostError=function(e){console.log("We entered simplifiedPostError()");var t,r=document.getElementsByClassName("judopay-errors")[0];t=e,r.innerHTML=t}}(errorReporting);var inputEventListeners=inputEventListeners||{};!function(e){inputEventListeners.setUpEventListeners=function(){var e,t,r;console.log("error-listeners: setUpErrorEventHandlers"),(e=document.getElementById("cardNumberInput")).onkeyup=function(){if(cardTypeMatcher.setCardType(cardTypeMatcher.identifyCardType(this.value)),inputUtils.isNumericKey(event.key)){var e=this.selectionStart,t=this.value.charAt(this.selectionStart);this.value=inputUtils.addSpacesToCardNumber(this.value)," "===t||""===t?this.setSelectionRange(e+1,e+1):this.setSelectionRange(e,e)}},e.onkeydown=function(e){inputUtils.isNumericKey(e.key)?20===inputUtils.inputWithoutSpaces(this.value).length&&this.value.selectionStart!==this.value.selectionEnd&&e.preventDefault():inputUtils.isEditingKey(e.key)||e.preventDefault()},e.onblur=function(e){errorReporting.removeCreditCardNumberErrors();var t=inputUtils.inputWithoutSpaces(this.value);if(""===t)errorReporting.throwValidationError(3),this.dispatchEvent(new CustomEvent("outEmpty"));else if(cardTypeMatcher.hasMatchedType()){var r=cardNumber.validateCardNumberForType(t,cardTypeMatcher.getCurrentMatchedType());if(!0===r.isValid){this.dispatchEvent(new CustomEvent("outValid"));var n=document.getElementById("cardVerificationCodeInput");""!==n.value&&cvcUtils.validateCvcField(n)}else errorReporting.throwValidationError(1),this.dispatchEvent(new CustomEvent("outError"))}else errorReporting.throwValidationError(2)},(t=document.getElementById("expiryDateInput")).onkeydown=function(e){inputUtils.isNumericKey(e.key)||inputUtils.isEditingKey(e.key)?inputUtils.isNumericKey(e.key)&&(0===this.value.length||this.selectionEnd-this.selectionStart===this.value.length?e.key>1&&(e.preventDefault(),this.value="0"+e.key+" / "):"1"===this.value?(e.preventDefault(),e.key>2?this.value="01 / "+e.key:this.value="1"+e.key+" / "):"0"===this.value&&(e.preventDefault(),e.key>0&&(this.value=this.value+e.key+" / "))):e.preventDefault()},t.onblur=function(e){errorReporting.removeExpiryDateErrors();var t=expiryDate.isValidExpirationDate(inputUtils.inputWithoutSpaces(this.value));0===t?""!==this.value?(this.dispatchEvent(new CustomEvent("outValid")),1===this.value.split("/")[0].length&&(this.value="0"+this.value)):this.dispatchEvent(new CustomEvent("outEmpty")):(1===t?errorReporting.throwValidationError(4):2===t&&errorReporting.throwValidationError(5),this.dispatchEvent(new CustomEvent("outError")))},(r=document.getElementById("cardVerificationCodeInput")).onkeydown=function(e){inputUtils.isNumericKey(e.key)||inputUtils.isEditingKey(e.key)||e.preventDefault()},r.onblur=function(e){cvcUtils.validateCvcField(this)}}}();var errorStack=errorStack||{};!function(e){var t=[];e.latestError=function(){var r=e.size();return 0===r?-1:t[r-1]},e.pop=function(){var r=e.latestError();return t.pop(),r},e.push=function(r,n){-1!==function(e){for(var r=0;r<t.length;r++)if(t[r].id===e)return r;return-1}(r)&&e.removeElement(r),t.push({id:r,message:n})},e.size=function(){return t.length},e.isEmpty=function(){return 0===t.length},e.reset=function(){t=[]},e.removeElement=function(e){t=t.filter(function(t){return t.id!==e})}}(errorStack);var cardNumber=cardNumber||{};!function(e){function t(e,t,r){return console.log("card-number: validationStatus",e,t,r),{card:e,couldBeValid:t,isValid:r}}function r(e){return console.log("card-number: invalidNumberStatus"),t(e,!1,!1)}e.validateCardNumber=function(e,t){console.log("card-number: validateCardNumber");var r=this.validateCardNumberForType(e,t);return r.isValid=r.isValid&&this.validateCardNumberLuhn(e),r},e.sanitizeCardNumber=function(e){var t;if(console.log("card-number: sanitizeCardNumber",e),"number"==typeof e)t=String(e);else{if("string"!=typeof e)return null;t=e}return t=t.replace(/\D/g,"")},e.validateCardNumberForType=function(e,n){console.log("card-number: validateCardNumberForType",e,n);var a=cardTypeMatcher.getTypes()[n];if(null==a)return r();var o=a.exactRegex,i=a.lengths;return o.test(e)&&i.indexOf(e.length)>-1?t(e,!0,!0):r(e)},e.validateCardNumberLuhn=function(e){for(var t=e.length,r=t%2,n=0,a=t-1;a>=0;a--){var o=parseInt(e.charAt(a));a%2===r&&(o*=2),o>9&&(o-=9),n+=o}return n%10==0}}(cardNumber);var cardTypeMatcher=cardTypeMatcher||{};!function(e){var t="unknown",r=!0;e.getTypes=function(){return n},e.getApplicableTypesForCardNumber=function(e){console.log("card-type-matcher: getApplicableTypesForCardNumber");var t=[],r=cardNumber.sanitizeCardNumber(e);if(null===r)return t;for(var a in n)n[a].partialRegex.test(r)&&t.push(n[a]);return t},e.identifyCardType=function(e){console.log("card-type-matcher: identifyCardType");var t=this.getApplicableTypesForCardNumber(e);return 1===t.length?t[0].type:null},e.getCurrentMatchedType=function(){return t},e.hasMatchedType=function(){return"unknown"!==t&&null!==t},e.setCurrentlyMatchedType=function(e){t=e},e.setShowCardTypeIcons=function(e){(r=e,e)||(document.getElementById("cardTypeIconDiv").style.display="none")},e.setCardType=function(e){if(console.log("style-changer: setCardType"),this.setCurrentlyMatchedType(e),r){var t=document.getElementById("cardTypeIconDiv");switch(t.className="card-select",e){case"mastercard":t.className+=" select-mastercard-card";break;case"visa":t.className+=" select-visa-card";break;case"amex":t.className+=" select-amex-card";break;case"maestro":t.className+=" select-maestro-card";break;case"diners":t.className+=" select-diners-card";break;case"jcb":t.className+=" select-jcb-card";break;case"discover":t.className+=" select-discover-card"}}};var n={visa:{niceName:"Visa",type:"visa",partialRegex:/^4\d*$/,exactRegex:/^4\d*$/,gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},mastercard:{niceName:"Mastercard",type:"mastercard",partialRegex:/^(5|5[1-5]\d*)$/,exactRegex:/^(5[1-5]|222[1-9]|2[3-6]|27[0-1]|2720)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},amex:{niceName:"American Express",type:"amex",partialRegex:/^3[47]\d*$/,exactRegex:/^3[47]\d*$/,gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},maestro:{niceName:"Maestro",type:"maestro",partialRegex:/^(5|5[06-9]|6[37]\d*)$/,exactRegex:/^((5[06-9]|6[37])\d*)$/,gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19,20],code:{name:"CID",size:4}},diners:{niceName:"Diners Club",type:"diners",partialRegex:/^3([689]|0[0-5])\d*$/,exactRegex:/^3(0[0-5]|[689])\d*$/,gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},jcb:{niceName:"JCB",type:"jcb",partialRegex:/^(2131|1800|35)\d*$/,exactRegex:/^(2131|1800|35)\d*$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVV",size:3}},discover:{niceName:"Discover",type:"discover",partialRegex:/^6[045]\d*$/,exactRegex:/^(6011|65|64[4-9])\d*$/,gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}}}}(cardTypeMatcher);var cvcUtils=cvcUtils||{};!function(e){function t(e,t,r,n,a){0===e?t.dispatchEvent(new CustomEvent("outValid")):3===e?(errorReporting.throwValidationError(10,[n,a]),t.dispatchEvent(new CustomEvent("outEmpty"))):(1===e?errorReporting.throwValidationError(7,[n,a]):2===e?errorReporting.throwValidationError(8,[n,a]):4===e&&errorReporting.throwValidationError(9,[n]),t.dispatchEvent(new CustomEvent("outError")))}e.cvcRegex="^[0-9]+$",e.validateCvcField=function(e){if(errorReporting.removeCvcErrors(),cardTypeMatcher.hasMatchedType()){var t=cardTypeMatcher.getTypes()[cardTypeMatcher.getCurrentMatchedType()];return cvcUtils.validateCvcFieldForIdentifiedCardType(e,t.code.size,t.code.name,t.niceName)}return cvcUtils.validateCvcFieldForUnknownCardType(e)},e.validateCvcFieldForIdentifiedCardType=function(e,r,n,a){var o=cvcUtils.isValidCvc(e.value,r);return t(o,e,r,n,a),0===o},e.validateCvcFieldForUnknownCardType=function(e){var r=cvcUtils.isValidCvcForUnidentifiedCardType(e.value,3,4);return t(r,e,"3-4","CVC","unknown"),0===r},e.isValidCvc=function(e,t){return""===e?3:new RegExp(cvcUtils.cvcRegex).test(e)?e.length===t?0:e.length<t?1:2:4},e.isValidCvcForUnidentifiedCardType=function(e,t,r){return""===e?3:new RegExp(cvcUtils.cvcRegex).test(e)?e.length<=r&&e.length>=t?0:e.length<t?1:2:4}}(cvcUtils);var expiryDate=expiryDate||{};!function(e){e.expiryDateRegex="^(0?[1-9]|[1][0-2])[\\/]([0-9][0-9])$",e.isValidExpirationDate=function(e){if(console.log("expiry-date: isValidExpirationDate",e),""===e)return errorReporting.removeExpiryDateErrors(),0;if(this.isValidDateString(e)){console.log(e+" valid against regex "+this.expiryDateRegex);var t=(r=e,(n={month:0,year:0}).month=parseInt(r.split("/")[0]),n.year=parseInt("20"+r.split("/")[1]),n);return this.isNotPast(t.month,t.year)?(console.log("Date is after today "+new Date),0):(errorReporting.throwValidationError(4),1)}return errorReporting.throwValidationError(5),2;var r,n},e.isValidDateString=function(e){return console.log("expiry-date: isValidDateString"),new RegExp(expiryDate.expiryDateRegex).test(e)},e.isValidMonthInteger=function(e){return"number"==typeof e&&e>=1&&e<=12},e.isValidYearInteger=function(e){return"number"==typeof e&&e>=0&&e<=99},e.isNotPast=function(e,t){console.log("expiry-date: isNotPast",e,t);var r=new Date(t,e,1,23,59,59);r.setDate(r.getDate()-1);var n=new Date;return r.getTime()>n.getTime()}}(expiryDate);var inputUtils={isNumericKey:function(e){console.log("input-util: isNumericKey",e);var t=e.charCodeAt(0);return t>=48&&t<=57},isEditingKey:function(e){console.log("input-util: isEditingKey",e);return["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].indexOf(e)>-1},checkIfSpaceShouldBeAddedToCardField:function(e){var t=[4,8,12];cardTypeMatcher.hasMatchedType()&&(t=cardTypeMatcher.getTypes()[cardTypeMatcher.getCurrentMatchedType()].gaps);var r=e.value.split(" ").length-1;inputUtils.inputWithoutSpaces(e.value).length===t[r]&&(e.value=e.value+" ")},addSpacesToCardNumber:function(e){var t=[4,8,12];cardTypeMatcher.hasMatchedType()&&(t=cardTypeMatcher.getTypes()[cardTypeMatcher.getCurrentMatchedType()].gaps);for(var r=inputUtils.inputWithoutSpaces(e),n="",a=0,o=0;o<r.length;o++)a<t.length&&o===t[a]&&(n+=" ",a++),n+=r.charAt(o);return n},inputWithoutSpaces:function(e){return e.replace(/\s/g,"")}},crossDomain=function(){var e,t,r,n=1,a=this;return{postMessage:function(e,t,r,o){if(r)if(o=o||parent,a.postMessage){var i={action:t,params:e};o.postMessage(i,r.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else r&&(o.location=r.replace(/#.*$/,"")+"#"+ +new Date+n+++"&"+e)},receiveMessage:function(n,o){a.postMessage?(n&&(r=function(e){if("string"==typeof o&&e.origin!==o||"[object Function]"===Object.prototype.toString.call(o)&&!1===o(e.origin))return!1;n(e)}),a.addEventListener?a[n?"addEventListener":"removeEventListener"]("message",r,!1):a[n?"attachEvent":"detachEvent"]("onmessage",r)):(e&&clearInterval(e),e=null,n&&(e=setInterval(function(){var e=document.location.hash,r=/^#?\d+&/;e!==t&&r.test(e)&&(t=e,n({data:e.replace(r,"")}))},100)))}}}();function errorToParent(e){crossDomain.postMessage(e,"errorMessage",merchantURL,parent)}function paymentResultToParent(e){crossDomain.postMessage(e,"return",merchantURL,parent)}crossDomain.receiveMessage(function(e){},environment.getIframeUrl());var judoDefaultConfig=judoDefaultConfig||{};judoDefaultConfig.defaultStyle={iframe:{language:"en",showCardTypeIcons:!0,backgroundColor:"white",fields:{generic:{borderRadius:"",backgroundColor:"white",backgroundColorFocus:"white",backgroundColorError:"white",backgroundColorValid:"white",textColor:"black",textColorFocus:"black",textColorError:"red",textColorValid:"",labelTextColor:"black",labelTextColorError:"red",labelTextColorValid:"black",border:"1px solid #b4b4b4",borderError:"1px solid #ff0000",width:"100%"}}}};var iframeBuilder=iframeBuilder||{};!function(e){function t(e,t,r,n){return r.id=e,function(e,t,r){var n=document.createElement(e);for(var a in t)n.setAttribute(a,t[a]);return r.appendChild(n),n}(t,r,n)}function r(e,r,n,a,o){var i=t(e+"Div","div",{class:"form-group relative"},o);t(e+"Label","label",{for:e+"Input"},i).innerHTML=r,a.placeholder=n;t(e+"Input","input",a,i);return i}iframeBuilder.populateIFrame=function(){var e;t("cardTypeIconDiv","div",{class:"card-select"},r("cardNumber","Card Number","Card Number",{class:"form-control",type:"tel",maxlength:"23",autocomplete:"off",spellcheck:"off"},e=t("outerDiv","div",{class:"card-form"},document.body))),r("expiryDate","Expiry Date","MM/YY",{class:"form-control",type:"tel",maxlength:"7",autocomplete:"off"},e),r("cardVerificationCode","CVC","CVC",{class:"form-control",type:"tel",maxlength:"4",autocomplete:"off"},e),inputEventListeners.setUpEventListeners()}}();var iframeInitialiser=iframeInitialiser||{};!function(e){e.iframeStyles=[],e.buildIFrame=function(e,t,r){var n=document.getElementById(e),a=document.createElement("iframe"),o="judo-"+t;a.setAttribute("id",o),a.setAttribute("frameBorder","0"),a.setAttribute("scrolling","no"),n.appendChild(a);var i=environment.getIframeUrl();a.setAttribute("src",i),this.setIframeDefaultStyle(a);var s=document.location.protocol,l=document.location.hostname,c=document.location.port;return iframeInitialiser.setIframeSrc(s+"//"+l+":"+c,t),a},e.setIframeDefaultStyle=function(e){return e.style.width="100%",e.style.height="210px",e},e.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.addStyle=function(e,t){var r={id:"judo-"+e,style:t};this.iframeStyles.push(r)},e.applyStyles=function(){for(var e=0;e<this.iframeStyles.length;e++)console.log(this.iframeStyles[e].id),this.iframeAction(this.iframeStyles[e].id,"judoSetup.setStyle",this.iframeStyles[e].style)},e.setupData=function(e,t){this.iframeAction(e,"judoSetup.setData",t)},e.setIframeSrc=function(e,t){document.getElementById("judo-"+t).src=environment.getIframeUrl()+"#"+encodeURIComponent(e)},e.iframeAction=function(e,t,r){console.log("Action -> "+t);var n={action:t,params:r},a=document.location.protocol,o=document.location.hostname,i=document.location.port;console.log("document: "+a+"//"+o+":"+i),console.log("Iframe src: "+environment.getIframeUrl()),document.getElementById(e).contentWindow.postMessage(n,environment.getIframeUrl())}}(iframeInitialiser);var paymentMethods=paymentMethods||{};!function(e){function t(e,t,r,n){console.log("need to think about production vs sandbox vs local");var a,o,i,s,l=environment.getPartnerUrl(),c={cardNumber:e,expiryDate:t,cv2:r},d=JSON.stringify(c);return a=l,o=n,i=d,s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),new Promise(function(e,t){s.open("POST",a),s.onreadystatechange=function(){s.readyState>3&&200===s.status&&e(s.response)},s.onload=function(){this.status>=200&&this.status<300?e(s.response):t({status:this.status,statusText:s.statusText})},s.onerror=function(){t({status:this.status,statusText:s.statusText})},s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Authorization","Simple "+o),s.setRequestHeader("API-Version","5.5.0"),s.send(i)})}function r(e){}function n(e){var t=JSON.parse(e);t.error=!1,paymentResultToParent(t)}paymentMethods.paymentDetails=function(){var e,a,o,i,s,l=document.getElementById("cardNumberInput"),c=document.getElementById("expiryDateInput"),d=document.getElementById("cardVerificationCodeInput");!1!==(e=l,a=c,o=d,i=cardTypeMatcher.getCurrentMatchedType(),s=inputUtils.inputWithoutSpaces(e.value),!!cardNumber.validateCardNumber(s,i).isValid&&!1!==cvcUtils.validateCvcField(o)&&0===expiryDate.isValidExpirationDate(inputUtils.inputWithoutSpaces(a.value)))&&t(l.value,c.value,d.value,apiToken).then(n).catch(r)}}();var judoSetup=judoSetup||{};function actionFromParent(e){if(console.log("user-setup: actionFromParent",e.data.action),"errorMessage"!==e.data.action)if("return"!==e.data.action){var t;if(e.data.action.indexOf(".")>-1){var r=e.data.action.split(".");t=window[r[0]][r[1]]}else t=window[e.data.action];"function"==typeof t?t(e.data.params):console.log("Sorry, "+e.data.action+" is not a function")}else console.log("hit in actionFromParent");else errorReporting.simplifiedPostError(e.data.params)}function getElement(e){throw new exception("Is this used. if so change to environment.isLocal")}!function(e){function t(e){return null!=e&&""!=e&&0!=e.length}function r(e,t){console.log("user-setup:applyStyleToField",e,t);var r=document.getElementById(t);r.style.backgroundColor=e.backgroundColor,r.style.color=e.textColor,r.style.borderColor=e.borderColor,r.parentElement.style.width=e.width,r.style.height=e.height,r.parentElement.style.left=e.x,r.parentElement.style.top=e.y,r.style.border=e.border,r.style.borderStyle=e.borderStyle,r.style.borderRadius=e.borderRadius,r.parentElement.getElementsByTagName("label")[0].style.color=e.labelTextColor}function n(e,r){console.log("user-setup:applyTextToField",e),e.hasOwnProperty("placeholderText")&&t(e.placeholderText)&&judoStrings.setPlaceholder(r,e.placeholderText),e.hasOwnProperty("labelText")&&t(e.labelText)&&judoStrings.setLabel(r,e.labelText)}function a(e){console.log("user-setup:setFieldText",judoStrings.fieldsLabelText,judoStrings.fieldsPlaceholderText);var t=document.getElementById(e);t.placeholder=judoStrings.fieldsPlaceholderText[e],t.parentElement.getElementsByTagName("label")[0].innerText=judoStrings.fieldsLabelText[e]}function o(e,t){var r=document.getElementById(t);r.addEventListener("focus",function(){this.style.backgroundColor=e.backgroundColorFocus,this.style.color=e.textColorFocus,this.style.border=e.border}),r.addEventListener("outError",function(){this.style.backgroundColor=e.backgroundColorError,this.style.color=e.textColorError,this.style.border=e.borderError,this.parentElement.getElementsByTagName("label")[0].style.color=e.labelTextColorError}),r.addEventListener("outValid",function(){console.log(t+" is valid!"),this.style.backgroundColor=e.backgroundColorValid,this.style.color=e.textColorValid,this.style.border=e.border,this.parentElement.getElementsByTagName("label")[0].style.color=e.labelTextColorValid}),r.addEventListener("outEmpty",function(){this.style.backgroundColor=e.backgroundColor,this.style.color=e.textColor,this.style.border=e.border,this.parentElement.getElementsByTagName("label")[0].style.color=e.labelTextColor})}e.setStyle=function(e){console.log("user-setup:setStyle",e),document.getElementsByTagName("body")[0].style.backgroundColor=e.backgroundColor,cardTypeMatcher.setShowCardTypeIcons(e.showCardTypeIcons),e.hasOwnProperty("errorTranslations")&&judoStrings.translateErrors(e.errorTranslations);var i={cardNumberInput:e.fields.cardNumber,expiryDateInput:e.fields.expiryDate,cardVerificationCodeInput:e.fields.cv2};for(var s in i){var l=i[s];if(l){var c=Object.keys(e.fields.generic);for(var d in c){var u=c[d];l.hasOwnProperty(u)&&t(l[u])||(l[u]=e.fields.generic[u])}}else l=e.fields.generic;r(l,s),n(l,s),o(l,s),a(s)}},e.setData=function(e){console.log("user-setup:setData",e),merchantURL=e.merchantUrl,apiToken=e.apiToken}}(judoSetup),window.addEventListener?window.addEventListener("message",actionFromParent,!1):window.attachEvent("onmessage",actionFromParent);var judoLanguages=judoLanguages||{};!function(e){e.languages=["en","fr","it","es"],e.isSupportedLanguage=function(e){return this.languages.indexOf(e)>-1},e.errorsList={}}(judoLanguages);var judoStrings=judoStrings||{};!function(e){e.errorList={0:"Credit card number can only contain numbers",1:"Credit card number not valid",2:"Credit card type not recognised, please recheck your number",3:"Credit card number required",4:"Credit card is expired",5:"Credit card expiry date is not valid",6:"Expiry date required",7:"{0} code too short for {1} card",8:"{0} code too long for {1} card",9:"{0} code can only contain numbers",10:"{0} code required for {1} card"},e.fieldsLabelText={cardNumberInput:"Card Number",expiryDateInput:"Expiry Date",cardVerificationCodeInput:"CVC"},e.fieldsPlaceholderText={cardNumberInput:"Card Number",expiryDateInput:"MM / YY",cardVerificationCodeInput:"CVC"},e.setLabel=function(t,r){e.fieldsLabelText[t]=r},e.setPlaceholder=function(t,r){e.fieldsPlaceholderText[t]=r},e.translateErrors=function(e){for(var t=Object.keys(e).length,r=0;r<t;r++)this.errorList[r]=e[r]}}(judoStrings);